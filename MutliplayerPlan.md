# Multiplayer Plan
## Overall Idea
The main idea of the multiplayer aspect of the game will be to allow for the player to connect to a server, and work with other players that are connected too, to get as many clicks as possible, all players will share the clicks variable, but each player's upgrades will be personal to them, this means that the player will have to spend the public clicks for their own personal upgrades.
## Mechanics overview
### Saving
The saving will be done by the server, not by the client, this means that the server will store the data of the players. I will have to figure out a system for the players to have unique identifiers, without the need of making accounts, as I do not have the facilities to do so. It might be down to having the players connect using their own ID's that they make, and then encrypting the save data so the host cannot look into what the ID of the players are.
### Upgrading
As stated before, the upgrading system will use a queue, meaning it is a first come first serve system. If the player pushes the upgrade button, the server puts them in a queue, the server looks at the first item in the queue, checks if the upgrade can be afforded, if it can, it returns yes to the client, if not, it returns no to the client, it then moves onto the next entry on the list. Using this mechanic means that I will have to greatly optimise my code, as having a slowly excecuted loop would cause the clients to suffer lag as their queuries are dealt with.
### Messaging
I am going to implement a simple messaging system into the game, not between singular players, but messaging onto the server, this means that the players can communicate what they need to do in oder to get the higher click values. This will also be achieved using the Socket library, allowing for the server to deal with recieving messages and sending them out to the other clients so they can display them.

## Networking
The multiplayer will use the Socket library for python to allow for them to connect to the server, and host their own servers for players to connect to. This means that the player will need the information of the server to allow them to connect properly. To allow for all connected players to all share the same amount of clicks, the game will use a queue system, so isntead of all of the users clicking upgrade, and getting the upgrade they want, the server puts that player at the back of the queue, the server then loops through each player, checks if the upgrade can be afforded, if they can't, dont do anything, but if they can, return a message to the user giving them the upgrade, and reducing the clicks amount by the correct amount. Of course the main downside to this method is that the players may have some lag when purchasing upgrades due to the queuing system, but would only really be the case for servers with larger player counts, where the host should be using faster hardware anyways.
### Security conecerns
The main concerns that I have for the online system in the game is the fact that the client and server connect directly to each other, which puts the server and the client at risk of eachother. There are a few ways that I can get around this problem, number one being that the server is port forwarded, which allows for the host to not need to give out their personal IP adress in order to have people connect, which would be paired alongside encrypting the data that is sent, so the client and server can't intersect the data being sent, and find personal information about the clients or the host of the server.
## Other concerns about multiplayer
Python's threading library is not *actually* threading, meaning that it does not properly split functions between each of the threads on the CPU, instead uses more of a time management system, splitting the timeline of what will happen into chunks, and then giving each thread a chunk each, and repeating this. This means that with each connected client taking up a thread,  a high quantity of players connected to the server will cause other clients to have delayed responses from the server, or random disconnects from the server if their thread chunk is relocated for a newly connected player to use.